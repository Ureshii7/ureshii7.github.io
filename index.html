<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ureshii7 · Terminal Portfolio</title>
  <link rel="stylesheet" href="https://unpkg.com/xterm/css/xterm.css" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #000;
      color: #fff;
      font-family: monospace;
    }
    #terminal {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="terminal"></div>

  <script src="https://unpkg.com/xterm/lib/xterm.js"></script>
  <script src="https://unpkg.com/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
  <script src="https://unpkg.com/xterm-addon-web-links/lib/xterm-addon-web-links.js"></script>

  <script>
    const PROFILE = {
      username: 'harshit',
      hostname: 'portfolio',
      home: '/home/harshit',
      about: `Hey, I'm Harshit — I build playful, performant web things.`,
      projects: [],
    };

    const term = new Terminal({
      cursorBlink: true,
      fontSize: 14,
      theme: {
        background: '#000000',
        foreground: '#e5e5e5',
        cursor: '#00ff00'
      }
    });

    const fitAddon = new FitAddon.FitAddon();
    const webLinksAddon = new WebLinksAddon.WebLinksAddon();
    term.loadAddon(fitAddon);
    term.loadAddon(webLinksAddon);

    term.open(document.getElementById('terminal'));
    fitAddon.fit();

    let input = '';
    let history = [];
    let histIndex = -1;

    function promptStr() {
      return `\r\n\x1b[32m${PROFILE.username}@${PROFILE.hostname}\x1b[0m:~$ `;
    }

    function writeln(text = '') {
      term.write(`\r\n${text}`);
    }

    const handlers = {
      help() {
        writeln('help  about  clear  neofetch');
      },
      about() {
        writeln(PROFILE.about);
      },
      clear() {
        term.clear();
      },
      neofetch() {
        const ascii = [
          ' __  __     ______     ______     ______     __  __     __     __   ',
          '/\\ \\\/\\ \\   /\\  == \\   /\\  ___\\   /\\  ___\\   /\\ \\_\\ \\   /\\ \\   /\\ \\  ',
          '\\ \\ \\_\\ \\  \\ \\  __<   \\ \\  __\\   \\ \\___  \\  \\ \\  __ \\  \\ \\ \\  \\ \\ \\ ',
          ' \\ \\_____\\  \\ \\_\\ \\_\\  \\ \\_____\\  \\/\\_____\\  \\ \\_\\ \\_\\  \\ \\_\\  \\ \\_\\ ',
          '  \\/_____/   \\/_/ /_/   \\/_____/   \\/_____/   \\/_/\\/_/   \\/_/   \\/_/ '
        ];
        ascii.forEach(l => writeln(`\x1b[36m${l}\x1b[0m`));
        writeln(`${PROFILE.username}@${PROFILE.hostname}`);
      }
    };

    term.write(promptStr());

    term.onKey(({ key, domEvent }) => {
      const kc = domEvent.keyCode;

      if (kc === 13) { // Enter
        writeln('');
        if (input.trim()) {
          history.push(input);
          histIndex = history.length;
          const parts = input.trim().split(/\s+/);
          const cmd = parts[0];
          const args = parts.slice(1);
          if (handlers[cmd]) {
            handlers[cmd](...args);
          } else {
            writeln(`${cmd}: command not found`);
          }
        }
        input = '';
        term.write(promptStr());
      }
      else if (kc === 8) { // Backspace
        if (input.length > 0) {
          term.write('\b \b');
          input = input.slice(0, -1);
        }
      }
      else if (kc === 38) { // Up arrow
        if (histIndex > 0) {
          histIndex--;
          const cmd = history[histIndex];
          term.write(`\x1b[2K\r${promptStr()}${cmd}`);
          input = cmd;
        }
      }
      else if (kc === 40) { // Down arrow
        if (histIndex < history.length - 1) {
          histIndex++;
          const cmd = history[histIndex];
          term.write(`\x1b[2K\r${promptStr()}${cmd}`);
          input = cmd;
        } else {
          histIndex = history.length;
          term.write(`\x1b[2K\r${promptStr()}`);
          input = '';
        }
      }
      else {
        input += key;
        term.write(key);
      }
    });
  </script>
</body>
</html>
